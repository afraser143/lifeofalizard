<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life of a Lizard</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #2c1810;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Arial', sans-serif;
        }

        .game-wrapper {
            position: relative;
            width: 800px;
            height: 400px;
        }

        #gameCanvas {
            border: 4px solid #4A90E2;
            border-radius: 8px;
            background: #87CEEB;
        }

        #gameStats {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .power-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 8px;
            border-radius: 50%;
            border: 2px solid #333;
            transition: all 0.3s ease;
            opacity: 0.2;
        }

        #firePower { 
            background: linear-gradient(45deg, #FF6B6B, #FFB347);
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        #waterPower { 
            background: linear-gradient(45deg, #4DACFF, #45B7D1);
            box-shadow: 0 0 10px rgba(77, 172, 255, 0.5);
        }
        #earthPower { 
            background: linear-gradient(45deg, #77DD77, #3CB371);
            box-shadow: 0 0 10px rgba(119, 221, 119, 0.5);
        }
        #superPower { 
            background: linear-gradient(45deg, #FFD93D, #FF8C00);
            box-shadow: 0 0 10px rgba(255, 217, 61, 0.5);
        }

        .power-active {
            animation: powerPulse 1.5s infinite;
            transform: scale(1.2);
            opacity: 1 !important;
        }

        @keyframes powerPulse {
            0% { transform: scale(1.2); }
            50% { transform: scale(1.4); }
            100% { transform: scale(1.2); }
        }

        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #startButton {
            padding: 15px 40px;
            font-size: 1.5em;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin: 20px 0;
        }

        #startButton:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        #controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }

        #musicToggle {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        #musicToggle:hover {
            background: #45a049;
        }

        #volumeSlider {
            width: 100px;
        }

        .game-title {
            color: white;
            font-size: 3.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
            font-family: 'Arial Black', sans-serif;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .instructions {
            color: white;
            margin-top: 20px;
            font-size: 1.2em;
            text-align: center;
            line-height: 1.6;
        }

        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #2c1810;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .loading-text {
            color: white;
            font-size: 24px;
            text-align: center;
        }
        /* Add these new styles to your existing CSS */

/* Player (Bearded Dragon) */
.bearded-dragon {
    width: 60px;
    height: 40px;
    background: linear-gradient(45deg, #8B4513, #A0522D);
    position: absolute;
    border-radius: 20px;
    transform-origin: center;
    transition: transform 0.1s;
}

.bearded-dragon::before {  /* Head */
    content: '';
    position: absolute;
    width: 25px;
    height: 25px;
    background: linear-gradient(45deg, #A0522D, #8B4513);
    right: -10px;
    top: 8px;
    border-radius: 50%;
}

.bearded-dragon::after {  /* Beard */
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: #8B4513;
    right: -18px;
    top: 10px;
    clip-path: polygon(0 0, 100% 50%, 0 100%);
}

/* Bugs */
.bug {
    width: 30px;
    height: 30px;
    position: absolute;
    border-radius: 50%;
    transition: transform 0.2s;
}

.bug::before,
.bug::after {  /* Wings */
    content: '';
    position: absolute;
    width: 20px;
    height: 15px;
    background: inherit;
    border-radius: 50%;
    opacity: 0.7;
}

.bug::before {
    top: -5px;
    left: -5px;
    transform: rotate(-45deg);
}

.bug::after {
    top: -5px;
    right: -5px;
    transform: rotate(45deg);
}

.fire-bug {
    background: radial-gradient(circle at 30% 30%, #FF4500, #FF0000);
    box-shadow: 0 0 15px #FF6347;
    animation: glow-fire 1s infinite alternate;
}

.water-bug {
    background: radial-gradient(circle at 30% 30%, #00BFFF, #0000FF);
    box-shadow: 0 0 15px #87CEEB;
    animation: glow-water 1s infinite alternate;
}

.earth-bug {
    background: radial-gradient(circle at 30% 30%, #32CD32, #006400);
    box-shadow: 0 0 15px #90EE90;
    animation: glow-earth 1s infinite alternate;
}

.super-bug {
    background: radial-gradient(circle at 30% 30%, #FFD700, #FFA500);
    box-shadow: 0 0 20px #FFD700;
    animation: glow-super 1.5s infinite alternate;
}

/* Evil Worm */
.evil-worm {
    width: 40px;
    height: 25px;
    background: linear-gradient(45deg, #FF4444, #FF0000);
    border-radius: 20px;
    position: absolute;
    animation: wiggle 0.5s infinite alternate;
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
}

.evil-worm::before,
.evil-worm::after {  /* Eyes */
    content: '';
    position: absolute;
    width: 6px;
    height: 6px;
    background: black;
    border-radius: 50%;
    top: 5px;
}

.evil-worm::before { left: 8px; }
.evil-worm::after { left: 22px; }

/* Animations */
@keyframes wiggle {
    from { transform: translateY(0); }
    to { transform: translateY(3px); }
}

@keyframes glow-fire {
    from { box-shadow: 0 0 15px #FF6347; }
    to { box-shadow: 0 0 25px #FF4500; }
}

@keyframes glow-water {
    from { box-shadow: 0 0 15px #87CEEB; }
    to { box-shadow: 0 0 25px #00BFFF; }
}

@keyframes glow-earth {
    from { box-shadow: 0 0 15px #90EE90; }
    to { box-shadow: 0 0 25px #32CD32; }
}

@keyframes glow-super {
    from { box-shadow: 0 0 20px #FFD700; }
    to { box-shadow: 0 0 30px #FFA500; }
}

/* Power auras */
.power-aura {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    opacity: 0.4;
    animation: pulse 1.5s infinite alternate;
}

@keyframes pulse {
    from { transform: scale(1); opacity: 0.4; }
    to { transform: scale(1.1); opacity: 0.6; }
}

/* Desert background */
.desert-background {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, #87CEEB 0%, #E6B980 60%, #EAC5A3 100%);
    overflow: hidden;
}

.desert-background::before {  /* Sand dunes */
    content: '';
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 40%;
    background: linear-gradient(180deg, #E6B980 0%, #EAC5A3 100%);
    border-radius: 50% 50% 0 0;
}
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="loadingScreen">
        <div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading game assets...</div>
        </div>
    </div>

    <div id="startScreen">
        <h1 class="game-title">Life of a Lizard</h1>
        <button id="startButton">Start Game</button>
        <div class="instructions">
            Use arrow keys to move<br>
            Collect power bugs and avoid the evil worm!<br>
            üî• Fire Bug - Flame powers<br>
            üíß Water Bug - Water shield<br>
            üåç Earth Bug - Ground pound<br>
            ‚≠ê Super Bug - Ultimate power!
        </div>
    </div>

    <div class="game-wrapper">
        <div id="gameStats">
            Score: <span id="score">0</span>
            <br>
            Powers:
            <div class="power-indicator" id="firePower"></div>
            <div class="power-indicator" id="waterPower"></div>
            <div class="power-indicator" id="earthPower"></div>
            <div class="power-indicator" id="superPower"></div>
        </div>
        
        <canvas id="gameCanvas" width="800" height="400"></canvas>

        <div id="controls">
            <button id="musicToggle">üîä Music</button>
            <input type="range" id="volumeSlider" min="0" max="100" value="50">
        </div>
    </div>

    <!-- Audio elements -->
    <audio id="backgroundMusic" loop>
        <source src="https://freesound.org/people/joshuaempyre/sounds/251461/download/251461__joshuaempyre__desert-eagle-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="powerupSound" src="https://freesound.org/people/GameAudio/sounds/220173/download/220173__gameaudio__flourish-spacey-2.mp3"></audio>
    <audio id="hitSound" src="https://freesound.org/people/LittleRobotSoundFactory/sounds/270332/download/270332__littlerobotsoundfactory__hit-02.mp3"></audio>

<script>
    // Get DOM elements
    const gameArea = document.getElementById('gameArea');
    const player = document.getElementById('player');
    const bugsContainer = document.getElementById('bugs-container');
    const enemiesContainer = document.getElementById('enemies-container');
    const scoreElement = document.getElementById('score');
    const startScreen = document.getElementById('startScreen');
    const startButton = document.getElementById('startButton');

    // Audio setup
    const bgMusic = document.getElementById('backgroundMusic');
    const powerupSound = document.getElementById('powerupSound');
    const hitSound = document.getElementById('hitSound');
    const musicToggle = document.getElementById('musicToggle');
    const volumeSlider = document.getElementById('volumeSlider');

    // Game state
    let gameStarted = false;
    let score = 0;
    let powers = {
        fire: false,
        water: false,
        earth: false,
        super: false
    };

    // Player properties
    const playerState = {
        x: 50,
        y: gameArea.clientHeight / 2,
        width: 60,
        height: 40,
        speed: 5
    };

    // Game objects arrays
    let bugs = [];
    let enemies = [];

    // Controls
    const keys = {};
    document.addEventListener('keydown', (e) => keys[e.key] = true);
    document.addEventListener('keyup', (e) => keys[e.key] = false);

    // Audio controls
    musicToggle.addEventListener('click', () => {
        if (bgMusic.paused) {
            bgMusic.play();
            musicToggle.textContent = 'üîä Music';
        } else {
            bgMusic.pause();
            musicToggle.textContent = 'üîà Music';
        }
    });

    volumeSlider.addEventListener('input', (e) => {
        const volume = e.target.value / 100;
        bgMusic.volume = volume;
        powerupSound.volume = volume;
        hitSound.volume = volume;
    });

    function updatePlayer() {
        if (keys['ArrowUp'] && playerState.y > 0) playerState.y -= playerState.speed;
        if (keys['ArrowDown'] && playerState.y < gameArea.clientHeight - playerState.height) 
            playerState.y += playerState.speed;
        if (keys['ArrowLeft'] && playerState.x > 0) playerState.x -= playerState.speed;
        if (keys['ArrowRight'] && playerState.x < gameArea.clientWidth - playerState.width) 
            playerState.x += playerState.speed;

        player.style.transform = `translate(${playerState.x}px, ${playerState.y}px)`;
    }

    function createBugElement(type) {
        const bug = document.createElement('div');
        bug.className = `bug ${type}-bug`;
        return bug;
    }

    function spawnBug() {
        const types = ['fire', 'water', 'earth', 'super'];
        const type = types[Math.floor(Math.random() * types.length)];
        const bugElement = createBugElement(type);
        
        const bug = {
            element: bugElement,
            x: gameArea.clientWidth,
            y: Math.random() * (gameArea.clientHeight - 30),
            width: 30,
            height: 30,
            type: type
        };

        bugElement.style.transform = `translate(${bug.x}px, ${bug.y}px)`;
        bugsContainer.appendChild(bugElement);
        bugs.push(bug);
    }

    function createWormElement() {
        const worm = document.createElement('div');
        worm.className = 'evil-worm';
        return worm;
    }

    function spawnEnemy() {
        const wormElement = createWormElement();
        
        const enemy = {
            element: wormElement,
            x: gameArea.clientWidth,
            y: Math.random() * (gameArea.clientHeight - 30),
            width: 40,
            height: 25,
            speed: 3
        };

        wormElement.style.transform = `translate(${enemy.x}px, ${enemy.y}px)`;
        enemiesContainer.appendChild(wormElement);
        enemies.push(enemy);
    }

    function updateGame() {
        // Update bugs
        bugs = bugs.filter(bug => {
            bug.x -= 2;
            bug.element.style.transform = `translate(${bug.x}px, ${bug.y}px)`;
            if (bug.x < -bug.width) {
                bugsContainer.removeChild(bug.element);
                return false;
            }
            return true;
        });

        // Update enemies
        enemies = enemies.filter(enemy => {
            enemy.x -= enemy.speed;
            enemy.element.style.transform = `translate(${enemy.x}px, ${enemy.y}px)`;
            if (enemy.x < -enemy.width) {
                enemiesContainer.removeChild(enemy.element);
                return false;
            }
            return true;
        });

        // Spawn new objects
        if (Math.random() < 0.02) spawnBug();
        if (Math.random() < 0.01) spawnEnemy();

        checkCollisions();
    }

    function isColliding(rect1, rect2) {
        return rect1.x < rect2.x + rect2.width &&
               rect1.x + rect1.width > rect2.x &&
               rect1.y < rect2.y + rect2.height &&
               rect1.y + rect1.height > rect2.y;
    }

    function checkCollisions() {
        const playerRect = {
            x: playerState.x,
            y: playerState.y,
            width: playerState.width,
            height: playerState.height
        };

        bugs.forEach((bug, index) => {
            if (isColliding(playerRect, bug)) {
                powers[bug.type] = true;
                updatePowerIndicators();
                score += 10;
                scoreElement.textContent = score;
                bugsContainer.removeChild(bug.element);
                bugs.splice(index, 1);
                powerupSound.currentTime = 0;
                powerupSound.play();

                const indicator = document.getElementById(`${bug.type}Power`);
                indicator.classList.add('power-active');
                setTimeout(() => indicator.classList.remove('power-active'), 1000);
            }
        });

        enemies.forEach((enemy, index) => {
            if (isColliding(playerRect, enemy)) {
                hitSound.play();
                gameOver();
            }
        });
    }

    function updatePowerIndicators() {
        Object.keys(powers).forEach(power => {
            const indicator = document.getElementById(`${power}Power`);
            indicator.style.opacity = powers[power] ? '1' : '0.2';
        });
    }

    function gameLoop() {
        if (!gameStarted) return;
        updatePlayer();
        updateGame();
        requestAnimationFrame(gameLoop);
    }

    function gameOver() {
        gameStarted = false;
        startScreen.style.display = 'flex';
        alert(`Game Over! Score: ${score}`);
        resetGame();
    }

    function resetGame() {
        score = 0;
        scoreElement.textContent = score;
        playerState.x = 50;
        playerState.y = gameArea.clientHeight / 2;
        player.style.transform = `translate(${playerState.x}px, ${playerState.y}px)`;
        
        // Clear all bugs and enemies
        bugsContainer.innerHTML = '';
        enemiesContainer.innerHTML = '';
        bugs = [];
        enemies = [];
        
        Object.keys(powers).forEach(power => powers[power] = false);
        updatePowerIndicators();
    }

    // Start button click handler
    startButton.addEventListener('click', () => {
        gameStarted = true;
        startScreen.style.display = 'none';
        resetGame();
        gameLoop();
        bgMusic.play().catch(() => {
            console.log('Audio playback failed; probably needs user interaction first');
        });
    });

    // Initialize power indicators
    updatePowerIndicators();
</script>
</body>
</html>
